<html>
  <head>
    <script
      src="https://cdn.socket.io/4.3.2/socket.io.min.js"
      integrity="sha384-KAZ4DtjNhLChOB/hxXuKqhMLYvx3b5MlT55xPEiNmREKRzeEm+RVPlTnAn0ajQNs"
      crossorigin="anonymous"
    ></script>
    <script>
      const socket = io("http://localhost:3000");
      socket.on("connect", function () {
        console.log("Connected");
      });

      socket.on("chat-participant-list", (data) => {
        console.log("chat participant list", data);
      });

      socket.on("chat-room-join", (data) => {
        console.log("join", data);
      });

      socket.on("chat-room-set-admin", (data) => {
        console.log(data);
      });

      function sendMsg() {
        const msg = document.getElementById("msg").value;
        socket.emit("message", {
          msg,
        });
      }

      function createRoom(roomId) {
        socket.emit("chat-room-join", {
          chatRoomId: 0,
          title: "hi",
          password: "",
          userId: 1,
          isCreate: true,
        });
      }

      function join(roomId, userId) {
        socket.emit("chat-room-join", {
          chatRoomId: 20,
          title: "hi",
          password: "",
          userId: userId,
          isCreate: false,
        });
      }

      function setAdmin(isAdmin) {
        socket.emit("chat-room-set-admin", {
          chatRoomId: 1,
          userId: 2,
          isAdmin: isAdmin,
        });
      }

      function leave(roomId, userId) {
        socket.emit("chat-room-leave", {
          chatRoomId: 20,
          nickname: "",
          userId: userId,
        });
      }

      function send(roomId, userId) {
        socket.emit("chat-room-message", {
          chatRoomId: 20,
          nickname: "",
          userId: userId,
          message: "worrrld!!!",
        });
      }

      socket.on("message", (data) => {
        console.log("message", data);
      });

      socket.on("events", function (data) {
        console.log("event", data);
      });
      socket.on("exception", function (data) {
        console.log("event", data);
      });
      socket.on("disconnect", function () {
        console.log("Disconnected");
      });
    </script>
  </head>

  <body>
    <ul>
      <li>
        <input type="text" id="msg" />
        <button onclick="sendMsg()">button1</button>
      </li>
      <li><button onclick="createRoom(1)">create 1번 유저 1번방</button></li>
      <li><button onclick="join(1, 1)">join 1번 유저</button></li>
      <li><button onclick="join(1, 2)">join 2번 유저</button></li>
      <li><button onclick="leave(1, 1)">leave 1번유저</button></li>
      <li><button onclick="leave(1, 2)">leave 2번유저</button></li>
      <li><button onclick="send(1, 1)">send 1번유저 1번방</button></li>
      <li><button onclick="setAdmin(true)">admin</button></li>
      <li><button onclick="setAdmin(false)">not admin</button></li>
    </ul>
  </body>
</html>
